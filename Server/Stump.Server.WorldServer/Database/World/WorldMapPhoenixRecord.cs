using Stump.DofusProtocol.D2oClasses;
using Stump.DofusProtocol.D2oClasses.Tools.D2o;
using Stump.ORM;
using Stump.ORM.SubSonic.SQLGeneration.Schema;
using Stump.Server.WorldServer.Game.Maps;

namespace Stump.Server.WorldServer.Database.World
{
    public class WorldMapPhoenixRelator
    {
        public static string FetchQuery = "SELECT * FROM world_maps_phoenix";
    }

    [TableName("world_maps_phoenix")]
    [D2OClass("Phoenix", "com.ankamagames.dofus.datacenter.world")]
    public sealed class WorldMapPhoenixRecord : IAssignedByD2O, IAutoGeneratedRecord
    {
        [PrimaryKey("Id")]
        public int Id
        {
            get;
            set;
        }

        public int MapId
        {
            get;
            set;
        }

        [Ignore]
        public Map Map => Game.World.Instance.GetMap(MapId);

        #region IAssignedByD2O Members

        public void AssignFields(object d2oObject)
        {
            var phoenix = (Phoenix)d2oObject;
            MapId = (int)phoenix.MapId;
        }

        #endregion
    }
}
